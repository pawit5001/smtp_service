{"version":3,"file":"static/js/307.31fe3a10.chunk.js","mappings":"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","sources":["utils/crypto.ts","components/SkeletonEmailList.tsx","components/SkeletonEmailContent.tsx","pages/ReadMail.tsx"],"sourcesContent":["// src/utils/crypto.ts\r\nimport CryptoJS from 'crypto-js';\r\n\r\nconst STORAGE_KEY = 'user_email_accounts';\r\nconst SECRET = 'snapmail2026';\r\n\r\nexport function encryptAccounts(accounts: any[]): string {\r\n  const data = JSON.stringify(accounts);\r\n  return CryptoJS.AES.encrypt(data, SECRET).toString();\r\n}\r\n\r\nexport function decryptAccounts(ciphertext: string): any[] {\r\n  try {\r\n    const bytes = CryptoJS.AES.decrypt(ciphertext, SECRET);\r\n    const decrypted = bytes.toString(CryptoJS.enc.Utf8);\r\n    return JSON.parse(decrypted);\r\n  } catch {\r\n    return [];\r\n  }\r\n}\r\n\r\nexport function saveAccounts(accounts: any[]) {\r\n  localStorage.setItem(STORAGE_KEY, encryptAccounts(accounts));\r\n}\r\n\r\nexport function loadAccounts(): any[] {\r\n  const cipher = localStorage.getItem(STORAGE_KEY);\r\n  if (!cipher) return [];\r\n  return decryptAccounts(cipher);\r\n}\r\n","import React from 'react';\r\n\r\nconst SkeletonEmailList: React.FC<{ count?: number }> = ({ count = 6 }) => (\r\n  <div className=\"flex flex-col gap-2 animate-pulse\">\r\n    {Array.from({ length: count }).map((_, i) => (\r\n      <div key={i} className=\"flex items-center gap-3 bg-gray-100 dark:bg-gray-800 rounded-lg h-16 p-3\">\r\n        <div className=\"w-8 h-8 rounded-full bg-gray-200 dark:bg-gray-700\" />\r\n        <div className=\"flex-1\">\r\n          <div className=\"h-4 bg-gray-200 dark:bg-gray-700 rounded w-1/2 mb-2\" />\r\n          <div className=\"h-3 bg-gray-200 dark:bg-gray-700 rounded w-1/3\" />\r\n        </div>\r\n      </div>\r\n    ))}\r\n  </div>\r\n);\r\n\r\nexport default SkeletonEmailList;\r\n","import React from 'react';\r\n\r\nconst SkeletonEmailContent: React.FC = () => (\r\n  <div className=\"p-6 animate-pulse bg-white dark:bg-gray-900 rounded-xl\">\r\n    <div className=\"h-6 bg-gray-200 dark:bg-gray-700 rounded w-2/3 mb-4\" />\r\n    <div className=\"h-4 bg-gray-200 dark:bg-gray-700 rounded w-1/3 mb-2\" />\r\n    <div className=\"h-4 bg-gray-200 dark:bg-gray-700 rounded w-1/4 mb-6\" />\r\n    <div className=\"space-y-2\">\r\n      {Array.from({ length: 10 }).map((_, i) => (\r\n        <div key={i} className=\"h-3 bg-gray-200 dark:bg-gray-700 rounded w-full\" />\r\n      ))}\r\n    </div>\r\n  </div>\r\n);\r\n\r\nexport default SkeletonEmailContent;\r\n","import React, { useEffect, useState, useRef, useCallback } from 'react';\r\nimport SkeletonEmailList from '../components/SkeletonEmailList';\r\nimport SkeletonEmailContent from '../components/SkeletonEmailContent';\r\n\r\ninterface Email {\r\n  subject: string;\r\n  from: string;\r\n  date: string;\r\n  snippet?: string;\r\n  body_text?: string;\r\n  body_html?: string;\r\n  headers?: Record<string, string>;\r\n  attachments?: Array<{\r\n    filename: string;\r\n    content_type: string;\r\n    size: number;\r\n    content_id?: string;\r\n    content_disposition?: string;\r\n    content?: string;\r\n  }>;\r\n}\r\n\r\nconst ReadMail: React.FC = () => {\r\n  // Multi-account selection\r\n  // Preload default accounts (CREDS_SMTP, CREDS_GRAPH_API) if not present\r\n  const DEFAULT_ACCOUNTS = [\r\n    \"scavelli20322@outlook.com:E9KFDQHK72:M.C525_BAY.0.U.-Cr2ahYnR0lKDamU!PsNLhZjitfSxG5nWVXX*e80FlN2v7ds8KjPnQJS49uWLNeSjm28StMZzxrMDkZcG!VCOEbLQPoAL47VUKF5LArrGFFumN1EEIdrJGgTsic31r3jgjWD9M6APy13ZA*Z!acADB0!UTuGWd9EDoX8fzHXz6pMRv7N25!UnxpP6xAVIkAiMO3Oc8y2qxUmXn*9H85yR6rzKHFxAfmJjVtR3QXkWrFo8svzckWd!1xEmQFuCpJf5yTqJT9HTPERq1WSTWSpuuKo4P*U9k3MMP5IbGbzf1q77GeNa3zEOBf0V6RBRH04N!JViKhoYPHg66SMg1pEcC35!ykJOdFDP5B87SRO3ue3JwMNC2BYvKSnvLzLvTOsdK140o8uwMKOTz01OGSHG7pnCKcQvWlyVw9RAFvdRkkcG2Utm9bL0JLMSZFZlpnKyo*Pm9EuZwpMI33ARhKQsYA4$:9e5f94bc-e8a4-4e73-b8be-63364c29d753\",\r\n    \"xvrifkhiss3889@hotmail.com|btkulnpgqc6633|M.C514_BAY.0.U.-CtJ7GCOdTQTBpb9P4kmJIg21RM72jCtBfhs0UTewbfrvLjb5Qi63vsnpSQoMrDnZmQ1M7wBZS2JdvFMM5xFmj2xcqDA6adQ6Qj3voyxcA!m8OzrSYOO4gn0KQkfeaoBBTIDAJxtrDy3CZy99MaoXzOqud8Iw22Pivbe0!G1vUXlDtOouwHAkuHCk!ErR8i5JRWZgpjKlKyCl18uubG*4HMoRo2yEo1cSnkHjImCRNa2GQ5SaVrMLTK8OUZTdHxaSau8zaejKaDXIdMXvjpXSW6KZxY9tHfIG1ANpb0o!2SFSsYmPyZQ59E8gjxlJYFe564wXlobB00G6TUO9f9Qzys5NEOPl5zx28vGMgP6alrIcA1HrX!ZpQIu3NbfmzWvGk1izNpFWpdbZyP0Z4sSiJmf6NMaN1bog5E9zxdZI9Y5y|9e5f94bc-e8a4-4e73-b8be-63364c29d753\"\r\n  ];\r\n  const [accounts, setAccounts] = useState<any[]>(() => {\r\n    try {\r\n      const { loadAccounts } = require('../utils/crypto');\r\n      let loaded = loadAccounts();\r\n      DEFAULT_ACCOUNTS.forEach(def => {\r\n        const defEmail = def.split(/[|:]/)[0];\r\n        if (!loaded.some((acc: string) => acc.split(/[|:]/)[0] === defEmail)) {\r\n          loaded.push(def);\r\n        }\r\n      });\r\n      // Sort: default accounts (alphabetically) on top, then others alphabetically\r\n      loaded.sort((a: string, b: string) => {\r\n        const emailA = a.split(/[|:]/)[0];\r\n        const emailB = b.split(/[|:]/)[0];\r\n        const isDefA = [\"scavelli20322@outlook.com\", \"xvrifkhiss3889@hotmail.com\"].includes(emailA);\r\n        const isDefB = [\"scavelli20322@outlook.com\", \"xvrifkhiss3889@hotmail.com\"].includes(emailB);\r\n        if (isDefA && isDefB) return emailA.localeCompare(emailB);\r\n        if (isDefA && !isDefB) return -1;\r\n        if (!isDefA && isDefB) return 1;\r\n        return emailA.localeCompare(emailB);\r\n      });\r\n      return loaded;\r\n    } catch {\r\n      return [...DEFAULT_ACCOUNTS].sort((a: string, b: string) => {\r\n        const emailA = a.split(/[|:]/)[0];\r\n        const emailB = b.split(/[|:]/)[0];\r\n        const isDefA = [\"scavelli20322@outlook.com\", \"xvrifkhiss3889@hotmail.com\"].includes(emailA);\r\n        const isDefB = [\"scavelli20322@outlook.com\", \"xvrifkhiss3889@hotmail.com\"].includes(emailB);\r\n        if (isDefA && isDefB) return emailA.localeCompare(emailB);\r\n        if (isDefA && !isDefB) return -1;\r\n        if (!isDefA && isDefB) return 1;\r\n        return emailA.localeCompare(emailB);\r\n      });\r\n    }\r\n  });\r\n\r\n  // Persist selected account index in localStorage\r\n  const ACCOUNT_IDX_KEY = 'readmail_selected_account_idx';\r\n  const getDefaultAccountIdx = (accounts: string[]) => {\r\n    const saved = localStorage.getItem(ACCOUNT_IDX_KEY);\r\n    if (saved && !isNaN(Number(saved)) && accounts[Number(saved)]) return Number(saved);\r\n    const idx = accounts.findIndex((acc: string) => acc.split(/[|:]/)[0] === \"xvrifkhiss3889@hotmail.com\");\r\n    return idx !== -1 ? idx : 0;\r\n  };\r\n  const [selectedAccountIdx, setSelectedAccountIdx] = useState(() => {\r\n    const accs = (() => {\r\n      try {\r\n        const { loadAccounts } = require('../utils/crypto');\r\n        let loaded = loadAccounts();\r\n        DEFAULT_ACCOUNTS.forEach(def => {\r\n          const defEmail = def.split(/[|:]/)[0];\r\n          if (!loaded.some((acc: string) => acc.split(/[|:]/)[0] === defEmail)) {\r\n            loaded.push(def);\r\n          }\r\n        });\r\n        return loaded;\r\n      } catch {\r\n        return [...DEFAULT_ACCOUNTS];\r\n      }\r\n    })();\r\n    const saved = localStorage.getItem(ACCOUNT_IDX_KEY);\r\n    if (saved && !isNaN(Number(saved)) && accs[Number(saved)]) return Number(saved);\r\n    const idx = accs.findIndex((acc: string) => acc.split(/[|:]/)[0] === \"xvrifkhiss3889@hotmail.com\");\r\n    return idx !== -1 ? idx : 0;\r\n  });\r\n  // Save to localStorage when changed\r\n  React.useEffect(() => {\r\n    localStorage.setItem(ACCOUNT_IDX_KEY, String(selectedAccountIdx));\r\n  }, [selectedAccountIdx]);\r\n  const [activeEmail, setActiveEmail] = useState<string | null>(null);\r\n  const [isDefaultEmail, setIsDefaultEmail] = useState(true);\r\n  const [emails, setEmails] = useState<Email[]>([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [readMethod, setReadMethod] = useState<'imap' | 'graph'>('imap');\r\n  const [page, setPage] = useState(1);\r\n  const [pageSize] = useState(10);\r\n  const [hasMore, setHasMore] = useState(true);\r\n  const loaderRef = useRef<HTMLDivElement | null>(null);\r\n  const [sort, setSort] = useState<'desc' | 'asc'>('desc');\r\n  const [selectedIdx, setSelectedIdx] = useState<number | null>(null);\r\n  const [search, setSearch] = useState('');\r\n\r\n  // Filter emails by search\r\n  const filteredEmails = emails.filter((email: Email) => {\r\n    const q = search.toLowerCase();\r\n    return (\r\n      email.subject?.toLowerCase().includes(q) ||\r\n      email.from?.toLowerCase().includes(q) ||\r\n      email.body_text?.toLowerCase().includes(q)\r\n    );\r\n  });\r\n\r\n  // Infinite scroll: reset emails on filter/search/account/sort change\r\n  useEffect(() => {\r\n    setEmails([]);\r\n    setPage(1);\r\n    setHasMore(true);\r\n  }, [readMethod, pageSize, sort, accounts, selectedAccountIdx, search]);\r\n\r\n  // Fetch emails when page changes or after reset\r\n  useEffect(() => {\r\n    let ignore = false;\r\n    if (readMethod === 'graph') {\r\n      setEmails([]);\r\n      setError('ขออภัย ขณะนี้ยังไม่รองรับการอ่านอีเมลผ่าน Microsoft Graph API เนื่องจาก scope/สิทธิ์ของแอปพลิเคชันไม่ได้ตรงกับที่ Microsoft อนุญาต กรุณาใช้ IMAP/POP3 สำหรับการอ่านอีเมล');\r\n      setLoading(false);\r\n      setHasMore(false);\r\n      return;\r\n    }\r\n    setLoading(true);\r\n    let apiUrl = process.env.REACT_APP_API_URL || '';\r\n    if (!apiUrl) {\r\n      if (window.location.hostname === '127.0.0.1') {\r\n        apiUrl = 'http://127.0.0.1:8000';\r\n      } else {\r\n        apiUrl = 'http://localhost:8000';\r\n      }\r\n    }\r\n    const params = new URLSearchParams({\r\n      sort,\r\n      page: page.toString(),\r\n      page_size: pageSize.toString(),\r\n    });\r\n    let userCred: string | null = null;\r\n    let userEmail: string | null = null;\r\n    let isDefault: boolean = true;\r\n    if (accounts.length > 0 && accounts[selectedAccountIdx]) {\r\n      userCred = accounts[selectedAccountIdx];\r\n      if (userCred) {\r\n        const sep = userCred.includes('|') ? '|' : userCred.includes(':') ? ':' : '|';\r\n        userEmail = userCred.split(sep)[0];\r\n        isDefault = false;\r\n      } else {\r\n        userEmail = 'xvrifkhiss3889@hotmail.com';\r\n        isDefault = true;\r\n      }\r\n    } else {\r\n      userEmail = 'xvrifkhiss3889@hotmail.com';\r\n      isDefault = true;\r\n    }\r\n    setActiveEmail(userEmail);\r\n    setIsDefaultEmail(isDefault);\r\n    const cacheKey = `readmail_cache_${userEmail}_${sort}_${page}_${pageSize}_${readMethod}`;\r\n    const cache = localStorage.getItem(cacheKey);\r\n    if (cache) {\r\n      try {\r\n        const parsed = JSON.parse(cache);\r\n        if (!ignore) {\r\n          setEmails((prev: Email[]) => page === 1 ? (parsed.emails || []) : [...prev, ...(parsed.emails || [])]);\r\n          setError(parsed.error || null);\r\n          setHasMore(parsed.emails && parsed.emails.length === pageSize);\r\n          setLoading(false);\r\n        }\r\n        return;\r\n      } catch {}\r\n    }\r\n    const fetchEmails = async () => {\r\n      try {\r\n        let res;\r\n        if (userCred) {\r\n          res = await fetch(`${apiUrl}/read-emails?${params.toString()}`, {\r\n            method: 'POST',\r\n            headers: {\r\n              'Content-Type': 'application/json',\r\n              'Authorization': `Bearer ${process.env.REACT_APP_API_KEY}`\r\n            },\r\n            body: JSON.stringify({ credentials: userCred })\r\n          });\r\n        } else {\r\n          res = await fetch(`${apiUrl}/read-emails?${params.toString()}`, {\r\n            headers: {\r\n              'Authorization': `Bearer ${process.env.REACT_APP_API_KEY}`\r\n            }\r\n          });\r\n        }\r\n        if (res.ok) {\r\n          const data = await res.json();\r\n          if (!ignore) {\r\n            setEmails((prev: Email[]) => page === 1 ? (data.emails || []) : [...prev, ...(data.emails || [])]);\r\n            setError(null);\r\n            setHasMore(data.emails && data.emails.length === pageSize);\r\n          }\r\n          localStorage.setItem(cacheKey, JSON.stringify({ emails: data.emails || [] }));\r\n        } else {\r\n          const errorData = await res.json();\r\n          if (!ignore) {\r\n            setError(errorData.detail || 'Unknown error');\r\n            setHasMore(false);\r\n          }\r\n          localStorage.setItem(cacheKey, JSON.stringify({ emails: [], error: errorData.detail || 'Unknown error' }));\r\n        }\r\n      } catch (err) {\r\n        if (!ignore) {\r\n          if (err instanceof Error) {\r\n            setError(err.message);\r\n            setHasMore(false);\r\n            localStorage.setItem(cacheKey, JSON.stringify({ emails: [], error: err.message }));\r\n          } else {\r\n            setError('An unknown error occurred.');\r\n            setHasMore(false);\r\n            localStorage.setItem(cacheKey, JSON.stringify({ emails: [], error: 'An unknown error occurred.' }));\r\n          }\r\n        }\r\n      } finally {\r\n        if (!ignore) setLoading(false);\r\n      }\r\n    };\r\n    fetchEmails();\r\n    return () => { ignore = true; };\r\n  }, [readMethod, page, pageSize, sort, accounts, selectedAccountIdx]);\r\n\r\n  // Infinite scroll observer\r\n  const handleObserver = useCallback((entries: IntersectionObserverEntry[]) => {\r\n    const target = entries[0];\r\n    if (target.isIntersecting && hasMore && !loading) {\r\n      setPage(p => p + 1);\r\n    }\r\n  }, [hasMore, loading]);\r\n\r\n  useEffect(() => {\r\n    const option = { root: null, rootMargin: '0px', threshold: 0.1 };\r\n    const observer = new window.IntersectionObserver(handleObserver, option);\r\n    if (loaderRef.current) observer.observe(loaderRef.current);\r\n    return () => {\r\n      if (loaderRef.current) observer.unobserve(loaderRef.current);\r\n    };\r\n  }, [handleObserver]);\r\n\r\n  // Responsive logic\r\n  const [isMobile, setIsMobile] = useState(() => window.innerWidth < 768);\r\n  useEffect(() => {\r\n    const handleResize = () => setIsMobile(window.innerWidth < 768);\r\n    window.addEventListener('resize', handleResize);\r\n    return () => window.removeEventListener('resize', handleResize);\r\n  }, []);\r\n  const showList = isMobile ? selectedIdx === null : true;\r\n  const showContent = isMobile ? selectedIdx !== null : true;\r\n\r\n  return (\r\n    <div className=\"flex flex-col min-h-screen bg-gray-50 dark:bg-gray-900\">\r\n      {/* Error message always visible on mobile, above card */}\r\n      {error && (\r\n        <div className=\"w-full px-2 sm:px-0 max-w-4xl mx-auto mt-4 z-30\">\r\n          <div className=\"text-red-500 text-center text-lg sm:text-base font-semibold break-words leading-relaxed mb-2 bg-white dark:bg-gray-900 rounded shadow py-3 px-2 border border-red-200 dark:border-red-700\">\r\n            {error.includes('400 Client Error: Bad Request for url: https://login.microsoftonline.com/common/oauth2/v2.0/token')\r\n              ? (\r\n                <>\r\n                  <div>ไม่สามารถอ่านอีเมลผ่าน Microsoft OAuth ได้ (400 Bad Request)</div>\r\n                  <div className=\"mt-2 text-gray-600 dark:text-gray-300 text-base sm:text-sm\">บัญชีนี้อาจไม่ได้เชื่อมต่อหรือสิทธิ์ไม่ถูกต้อง กรุณาตรวจสอบข้อมูลบัญชีหรือเลือกบัญชีอื่น</div>\r\n                </>\r\n              )\r\n              : error}\r\n          </div>\r\n        </div>\r\n      )}\r\n      <div className=\"max-w-4xl mx-auto w-full px-4 pt-4 pb-0\">\r\n        <div className=\"mb-2 text-xs text-gray-600 dark:text-gray-200 bg-gray-100 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded px-3 py-2 overflow-visible\">\r\n          <span className=\"font-semibold text-gray-800 dark:text-gray-100\">บัญชีที่ใช้ในการอ่านเมล:</span> {activeEmail} {[\r\n            \"scavelli20322@outlook.com\",\r\n            \"xvrifkhiss3889@hotmail.com\"\r\n          ].includes(activeEmail || \"\") && <span className=\"text-blue-500 font-normal text-xs ml-1\">(ค่าเริ่มต้น)</span>}\r\n          <div className=\"mt-2 relative overflow-visible\">\r\n            <label className=\"mr-2 font-medium\">เลือกบัญชี:</label>\r\n            <select\r\n              className=\"border rounded px-2 py-1 text-sm bg-white dark:bg-gray-800 dark:text-gray-100 border-gray-300 dark:border-gray-700 w-full sm:w-auto z-20\"\r\n              value={selectedAccountIdx}\r\n              onChange={(e: React.ChangeEvent<HTMLSelectElement>) => { setSelectedAccountIdx(Number(e.target.value)); setSelectedIdx(null); setPage(1); }}\r\n              title=\"เลือกบัญชีอีเมลที่ใช้ในการอ่าน\"\r\n              aria-label=\"เลือกบัญชีอีเมลที่ใช้ในการอ่าน\"\r\n              /* removed inline style, w-full already applied */\r\n            >\r\n              {accounts.map((acc, i) => {\r\n                  const sep = acc.includes('|') ? '|' : acc.includes(':') ? ':' : '|';\r\n                  const email = acc.split(sep)[0];\r\n                  const isDef = [\"scavelli20322@outlook.com\", \"xvrifkhiss3889@hotmail.com\"].includes(email);\r\n                  return <option value={i} key={i}>{email}{isDef ? ' (ค่าเริ่มต้น)' : ''}</option>;\r\n                })}\r\n            </select>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div className=\"flex-1 flex flex-col md:flex-row max-w-4xl mx-auto w-full px-4 py-6 gap-4\">\r\n        {/* Sidebar: Email List (mobile: full, desktop: left) */}\r\n        {showList && (\r\n          <div className=\"w-full md:w-1/3 md:max-w-xs bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl shadow-sm p-4 flex flex-col\">\r\n            <h2 className=\"text-lg font-bold mb-2 text-gray-900 dark:text-gray-100\">กล่องอีเมล</h2>\r\n            {/* Search/filter box */}\r\n            <div className=\"mb-2\">\r\n              <input\r\n                type=\"text\"\r\n                className=\"w-full border rounded px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-400 bg-white dark:bg-gray-900 dark:text-gray-100 border-gray-300 dark:border-gray-700\"\r\n                placeholder=\"ค้นหาอีเมล (หัวข้อ, ผู้ส่ง, ข้อความ)\"\r\n                value={search}\r\n                onChange={e => { setSearch(e.target.value); setSelectedIdx(null); }}\r\n                aria-label=\"ค้นหาอีเมล\"\r\n              />\r\n            </div>\r\n            <div className=\"mb-2 p-2 bg-blue-50 dark:bg-blue-900 border border-blue-200 dark:border-blue-700 rounded text-blue-800 dark:text-blue-200 text-xs\">\r\n              ระบบนี้รองรับการอ่านอีเมลผ่าน IMAP/POP3 เท่านั้น (Microsoft Graph API ยังไม่รองรับการอ่านอีเมล เนื่องจาก scope/สิทธิ์ของแอปพลิเคชันไม่ตรงกับที่ Microsoft อนุญาต)\r\n            </div>\r\n            <div className=\"mb-2 flex flex-wrap gap-2 items-center\">\r\n              <label className=\"font-medium mr-2 dark:text-gray-200\">เรียงลำดับ:</label>\r\n              <div className=\"relative w-48\">\r\n                <select\r\n                  className=\"w-full border rounded px-3 py-2 pr-8 appearance-none focus:ring-2 focus:ring-blue-400 bg-white dark:bg-gray-800 dark:text-gray-100 border-gray-300 dark:border-gray-700 shadow-sm hover:border-blue-400 transition\"\r\n                  value={sort}\r\n                  onChange={e => { setSort(e.target.value as 'desc' | 'asc'); setPage(1); }}\r\n                  aria-label=\"เรียงลำดับอีเมล\"\r\n                >\r\n                  <option value=\"desc\">ใหม่ → เก่า (ล่าสุดก่อน)</option>\r\n                  <option value=\"asc\">เก่า → ใหม่ (เก่าสุดก่อน)</option>\r\n                </select>\r\n                <span className=\"pointer-events-none absolute right-3 top-1/2 -translate-y-1/2 flex items-center\">\r\n                  <svg className=\"w-4 h-4 text-gray-400\" fill=\"none\" stroke=\"currentColor\" strokeWidth={2} viewBox=\"0 0 24 24\">\r\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M19 9l-7 7-7-7\" />\r\n                  </svg>\r\n                </span>\r\n              </div>\r\n            </div>\r\n            {/* Infinite scroll loader */}\r\n            <div ref={loaderRef} className=\"h-px\" />\r\n            {loading && <div className=\"text-center text-gray-400 text-xs mt-2\">กำลังโหลดอีเมล...</div>}\r\n            {!hasMore && !loading && (\r\n              <div className=\"text-center text-gray-400 text-xs mt-2\">ไม่มีอีเมลเพิ่มเติม</div>\r\n            )}\r\n            {/* Error is now shown only in main content area */}\r\n            {loading ? (\r\n              <div className=\"flex flex-col gap-2 mt-8\">\r\n                <SkeletonEmailList count={6} />\r\n                <div className=\"text-center text-gray-400 text-xs mt-2\">กำลังโหลดอีเมล...</div>\r\n              </div>\r\n            ) : filteredEmails.length === 0 ? (\r\n              <div className=\"text-center text-gray-400 mt-8\">ไม่พบอีเมล</div>\r\n            ) : (\r\n              <div className=\"flex flex-col gap-2 overflow-y-auto max-h-[60vh]\">\r\n                {filteredEmails.map((email, idx) => (\r\n                  <button\r\n                    key={idx}\r\n                    className={`text-left transition-shadow bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg shadow-sm hover:shadow-md p-3 flex flex-col gap-1 ${selectedIdx === idx ? 'ring-2 ring-blue-400 border-blue-300' : ''}`}\r\n                    onClick={() => setSelectedIdx(idx)}\r\n                    tabIndex={0}\r\n                    aria-label={`ดูอีเมลหัวข้อ ${email.subject || '(ไม่มีหัวเรื่อง)'}`}\r\n                  >\r\n                    <div className=\"font-semibold text-base truncate text-gray-900 dark:text-gray-100\">{email.subject || <span className=\"italic text-gray-400 dark:text-gray-500\">(ไม่มีหัวเรื่อง)</span>}</div>\r\n                    <div className=\"text-xs text-gray-500 dark:text-gray-300 truncate\">จาก: {email.from || <span className=\"italic text-gray-400 dark:text-gray-500\">(ไม่ระบุ)</span>}</div>\r\n                    <div className=\"text-xs text-gray-400 dark:text-gray-500\">{email.date && new Date(email.date).toLocaleString('th-TH', { dateStyle: 'medium', timeStyle: 'short' })}</div>\r\n                  </button>\r\n                ))}\r\n              </div>\r\n            )}\r\n          </div>\r\n        )}\r\n        {/* Main: Email Content (mobile: full, desktop: right) */}\r\n        {showContent && (\r\n          <div className=\"flex-1 bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-xl shadow-sm p-6 ml-0 md:ml-4 min-h-[400px] flex flex-col relative\">\r\n            {/* Mobile: back button */}\r\n            {isMobile && selectedIdx !== null && (\r\n              <button\r\n                className=\"absolute left-2 top-2 z-10 flex items-center gap-1 px-3 py-1 rounded bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-200 text-sm font-semibold shadow hover:bg-blue-200 dark:hover:bg-blue-800 transition\"\r\n                onClick={() => setSelectedIdx(null)}\r\n                aria-label=\"ย้อนกลับไปยังรายการอีเมล\"\r\n              >\r\n                <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" strokeWidth={2} viewBox=\"0 0 24 24\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M15 19l-7-7 7-7\" /></svg>\r\n                กลับ\r\n              </button>\r\n            )}\r\n            <div className={isMobile ? 'pt-8' : ''}>\r\n              {loading ? (\r\n                <div className=\"flex-1 flex flex-col justify-center items-center\">\r\n                  <div className=\"text-gray-400 text-sm mb-4\">กำลังโหลดเนื้อหาอีเมล...</div>\r\n                  <SkeletonEmailContent />\r\n                </div>\r\n              ) : error ? (\r\n                <div className=\"flex flex-1 items-center justify-center\"></div>\r\n              ) : emails.length === 0 ? (\r\n                <div className=\"text-center text-gray-400 my-auto\">ไม่พบอีเมล</div>\r\n              ) : selectedIdx === null ? (\r\n                <div className=\"text-center text-gray-400 my-auto\">เลือกอีเมลจากรายการ{isMobile ? '' : 'ทางซ้าย'}เพื่อดูเนื้อหา</div>\r\n              ) : (\r\n                (() => {\r\n                  const email = selectedIdx !== null ? emails[selectedIdx] : undefined;\r\n                  if (!email) return null;\r\n                  return (\r\n                    <div className=\"flex flex-col gap-2\">\r\n                      <div className=\"mb-2\">\r\n                        <div className=\"text-lg font-bold text-gray-900 dark:text-gray-100\">{email.subject || <span className=\"italic text-gray-400 dark:text-gray-500\">(ไม่มีหัวเรื่อง)</span>}</div>\r\n                        <div className=\"text-xs text-gray-500 dark:text-gray-300\">จาก: {email.from || <span className=\"italic text-gray-400 dark:text-gray-500\">(ไม่ระบุ)</span>}</div>\r\n                        <div className=\"text-xs text-gray-400 dark:text-gray-500\">{email.date && new Date(email.date).toLocaleString('th-TH', { dateStyle: 'medium', timeStyle: 'short' })}</div>\r\n                      </div>\r\n                      <div className=\"text-sm text-gray-700 dark:text-gray-100 whitespace-pre-line break-words overflow-x-auto min-h-[120px] rounded p-3 bg-gray-50 dark:bg-gray-900\">\r\n                        {email.body_text ? email.body_text : <span className=\"italic text-gray-400 dark:text-gray-500\">(ไม่มีเนื้อหา)</span>}\r\n                      </div>\r\n                      {/* Attachments */}\r\n                      {email.attachments && email.attachments.length > 0 ? (\r\n                        <div className=\"mt-4\">\r\n                          <div className=\"font-medium text-gray-700 dark:text-gray-200 mb-1\">ไฟล์แนบ:</div>\r\n                          <ul className=\"list-disc list-inside text-xs text-gray-600 dark:text-gray-300\">\r\n                            {email.attachments.map((att: any, i: number) => (\r\n                              <li key={i}>{att.filename} <span className=\"text-gray-400\">({att.size} bytes)</span></li>\r\n                            ))}\r\n                          </ul>\r\n                        </div>\r\n                      ) : null}\r\n                    </div>\r\n                  );\r\n                })()\r\n              )}\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ReadMail;\r\n"],"names":["STORAGE_KEY","SECRET","encryptAccounts","accounts","data","JSON","stringify","CryptoJS","encrypt","toString","decryptAccounts","ciphertext","decrypted","decrypt","Utf8","parse","_unused","saveAccounts","localStorage","setItem","loadAccounts","cipher","getItem","_ref","count","_jsx","className","children","Array","from","length","map","_","i","_jsxs","SkeletonEmailContent","ReadMail","DEFAULT_ACCOUNTS","setAccounts","useState","require","loaded","forEach","def","defEmail","split","some","acc","push","sort","a","b","emailA","emailB","isDefA","includes","isDefB","localeCompare","ACCOUNT_IDX_KEY","selectedAccountIdx","setSelectedAccountIdx","accs","_unused2","saved","isNaN","Number","idx","findIndex","React","String","activeEmail","setActiveEmail","isDefaultEmail","setIsDefaultEmail","emails","setEmails","loading","setLoading","error","setError","readMethod","setReadMethod","page","setPage","pageSize","hasMore","setHasMore","loaderRef","useRef","setSort","selectedIdx","setSelectedIdx","search","setSearch","filteredEmails","filter","email","_email$subject","_email$from","_email$body_text","q","toLowerCase","subject","body_text","useEffect","ignore","apiUrl","process","window","location","hostname","params","URLSearchParams","page_size","userCred","userEmail","isDefault","sep","cacheKey","concat","cache","parsed","prev","_unused3","async","res","fetch","method","headers","body","credentials","ok","json","errorData","detail","err","Error","message","fetchEmails","handleObserver","useCallback","entries","isIntersecting","p","observer","IntersectionObserver","root","rootMargin","threshold","current","observe","unobserve","isMobile","setIsMobile","innerWidth","handleResize","addEventListener","removeEventListener","showList","showContent","_Fragment","value","onChange","e","target","title","isDef","type","placeholder","fill","stroke","strokeWidth","viewBox","strokeLinecap","strokeLinejoin","d","ref","SkeletonEmailList","onClick","tabIndex","date","Date","toLocaleString","dateStyle","timeStyle","undefined","attachments","att","filename","size"],"ignoreList":[],"sourceRoot":""}