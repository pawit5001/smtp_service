{"version":3,"file":"static/js/861.8a2e148f.chunk.js","mappings":"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","sources":["utils/crypto.ts","components/AddEmailAccount.tsx","pages/ManageAccounts.tsx"],"sourcesContent":["// src/utils/crypto.ts\r\nimport CryptoJS from 'crypto-js';\r\n\r\nconst STORAGE_KEY = 'user_email_accounts';\r\nconst SECRET = 'snapmail2026';\r\n\r\nexport function encryptAccounts(accounts: any[]): string {\r\n  const data = JSON.stringify(accounts);\r\n  return CryptoJS.AES.encrypt(data, SECRET).toString();\r\n}\r\n\r\nexport function decryptAccounts(ciphertext: string): any[] {\r\n  try {\r\n    const bytes = CryptoJS.AES.decrypt(ciphertext, SECRET);\r\n    const decrypted = bytes.toString(CryptoJS.enc.Utf8);\r\n    return JSON.parse(decrypted);\r\n  } catch {\r\n    return [];\r\n  }\r\n}\r\n\r\nexport function saveAccounts(accounts: any[]) {\r\n  localStorage.setItem(STORAGE_KEY, encryptAccounts(accounts));\r\n}\r\n\r\nexport function loadAccounts(): any[] {\r\n  const cipher = localStorage.getItem(STORAGE_KEY);\r\n  if (!cipher) return [];\r\n  return decryptAccounts(cipher);\r\n}\r\n","\r\nimport React, { useState } from 'react';\r\n\r\n\r\ninterface AddEmailAccountProps {\r\n  onAdd: (acc: any) => void;\r\n  accounts?: string[];\r\n}\r\n\r\nconst AddEmailAccount: React.FC<AddEmailAccountProps> = ({ onAdd, accounts = [] }) => {\r\n  const [cred, setCred] = useState('');\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  function validate() {\r\n    const sep = cred.includes('|') ? '|' : cred.includes(':') ? ':' : '|';\r\n    const parts = cred.split(sep);\r\n    if (parts.length < 4 || parts.length > 5) return 'รูปแบบต้องเป็น email|password|refresh_token|client_id หรือ email|password|refresh_token|client_id|client_secret (ใช้ | หรือ : ก็ได้)';\r\n    if (!parts[0].match(/^\\S+@\\S+\\.\\S+$/)) return 'กรุณากรอกอีเมลให้ถูกต้อง';\r\n    // Duplicate email validation\r\n    if (accounts.some((a) => {\r\n      const sep2 = a.includes('|') ? '|' : a.includes(':') ? ':' : '|';\r\n      return a.split(sep2)[0] === parts[0];\r\n    })) return 'บัญชีอีเมลนี้ถูกเพิ่มไว้แล้ว';\r\n    return null;\r\n  }\r\n\r\n  function handleAdd(e: React.FormEvent) {\r\n    e.preventDefault();\r\n    const err = validate();\r\n    if (err) return setError(err);\r\n    setError(null);\r\n    // Always store as string, let backend parse\r\n    onAdd(cred);\r\n    setCred('');\r\n  }\r\n\r\n  return (\r\n    <form onSubmit={handleAdd} className=\"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl shadow-sm p-6 max-w-xl mx-auto mb-6\">\r\n      <h2 className=\"text-lg font-bold mb-4 text-gray-900 dark:text-gray-100\">เพิ่มบัญชีอีเมล</h2>\r\n      <div className=\"mb-4\">\r\n        <label className=\"block font-medium mb-1 text-gray-700 dark:text-gray-200\">ข้อมูลบัญชี (email|password|refresh_token|client_id[|client_secret] หรือ email:password:refresh_token:client_id[:client_secret])</label>\r\n        <input\r\n          className=\"w-full border rounded px-3 py-2 font-mono bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 border-gray-300 dark:border-gray-700 placeholder-gray-400 dark:placeholder-gray-500\"\r\n          value={cred}\r\n          onChange={e => setCred(e.target.value)}\r\n          placeholder=\"user@email.com|password|refresh_token|client_id  หรือ  user@email.com:password:refresh_token:client_id\"\r\n          required\r\n        />\r\n      </div>\r\n      {error && <div className=\"text-red-500 dark:text-red-400 mb-2\">{error}</div>}\r\n      <button type=\"submit\" className=\"w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 rounded shadow\">เพิ่มบัญชี</button>\r\n    </form>\r\n  );\r\n};\r\n\r\n\r\nexport default AddEmailAccount;\r\n","import React from 'react';\r\nimport AddEmailAccount from '../components/AddEmailAccount';\r\nimport { loadAccounts, saveAccounts } from '../utils/crypto';\r\n\r\nconst ManageAccounts: React.FC = () => {\r\n  const [accounts, setAccounts] = React.useState<any[]>(() => loadAccounts());\r\n\r\n  function handleAddAccount(acc: any) {\r\n    // Prevent duplicate email accounts\r\n    const sep = acc.includes('|') ? '|' : acc.includes(':') ? ':' : '|';\r\n    const email = acc.split(sep)[0];\r\n    if (accounts.some((a) => (a.split(a.includes('|') ? '|' : a.includes(':') ? ':' : '|')[0] === email))) {\r\n      alert('บัญชีอีเมลนี้ถูกเพิ่มไว้แล้ว');\r\n      return;\r\n    }\r\n    const newAccounts = [...accounts, acc];\r\n    setAccounts(newAccounts);\r\n    saveAccounts(newAccounts);\r\n  }\r\n\r\n  function handleDeleteAccount(idx: number) {\r\n    const newAccounts = accounts.filter((_, i) => i !== idx);\r\n    setAccounts(newAccounts);\r\n    saveAccounts(newAccounts);\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen w-full flex items-center justify-center bg-gray-50 dark:bg-gray-900\">\r\n      <div className=\"w-full max-w-4xl px-4 py-6\">\r\n        <AddEmailAccount onAdd={handleAddAccount} accounts={accounts} />\r\n        <div className=\"mb-8 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl shadow-sm p-6 max-w-xl mx-auto\">\r\n          <h3 className=\"font-bold mb-2 text-gray-900 dark:text-gray-100\">บัญชีอีเมลที่เพิ่มไว้ <span className=\"font-normal text-sm text-gray-500 dark:text-gray-300\">({accounts.length} บัญชี)</span></h3>\r\n          {accounts.length === 0 ? (\r\n            <div className=\"text-gray-500 dark:text-gray-300 text-sm\">ยังไม่มีบัญชีอีเมล</div>\r\n          ) : (\r\n            <div className=\"overflow-x-auto\">\r\n              <table className=\"min-w-full text-sm text-left\">\r\n                <thead>\r\n                  <tr className=\"border-b border-gray-200 dark:border-gray-700\">\r\n                    <th className=\"py-2 px-3 font-semibold text-gray-700 dark:text-gray-200\">อีเมล</th>\r\n                    <th className=\"py-2 px-3 font-semibold text-gray-700 dark:text-gray-200\">ลบ</th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  {accounts.map((acc, i) => {\r\n                    const sep = acc.includes('|') ? '|' : acc.includes(':') ? ':' : '|';\r\n                    const parts = acc.split(sep);\r\n                    return (\r\n                      <tr key={i} className=\"border-b border-gray-100 dark:border-gray-700\">\r\n                        <td className=\"py-2 px-3 text-gray-800 dark:text-gray-100\">{parts[0]}</td>\r\n                        <td className=\"py-2 px-3\">\r\n                          <button onClick={() => handleDeleteAccount(i)} className=\"px-2 py-0.5 text-xs bg-red-100 dark:bg-red-800 text-red-600 dark:text-red-200 rounded hover:bg-red-200 dark:hover:bg-red-600 border border-red-200 dark:border-red-700 transition-colors\">ลบ</button>\r\n                        </td>\r\n                      </tr>\r\n                    );\r\n                  })}\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ManageAccounts;\r\n"],"names":["STORAGE_KEY","SECRET","encryptAccounts","accounts","data","JSON","stringify","CryptoJS","encrypt","toString","decryptAccounts","ciphertext","decrypted","decrypt","Utf8","parse","_unused","saveAccounts","localStorage","setItem","loadAccounts","cipher","getItem","_ref","onAdd","cred","setCred","useState","error","setError","_jsxs","onSubmit","e","preventDefault","err","sep","includes","parts","split","length","match","some","a","sep2","validate","className","children","_jsx","value","onChange","target","placeholder","required","type","ManageAccounts","setAccounts","React","AddEmailAccount","acc","email","alert","newAccounts","map","i","onClick","idx","filter","_","handleDeleteAccount"],"ignoreList":[],"sourceRoot":""}